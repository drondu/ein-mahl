# Sleeping Queens Game Integration Guide

This guide explains how to integrate the Sleeping Queens card game into your existing web application.

## 1. Files to Add to Your Project

Copy these files to your project's `public` directory:

- `sleeping-queens-game.js` - Main game logic and UI
- `sleeping-queens-styles.css` - CSS styles for the game
- `game-loader.js` - Script to load the game in your game-area

## 2. Update Your game-session.html File

Add the game loader script to your `game-session.html` file by inserting this line just before the closing `</body>` tag:

```html
<script src="game-loader.js"></script>
```

## 3. Backend Implementation

1. Add the game state API routes from `sleeping-queens-api.js` to your server implementation.

2. Update your Game model to include a `gameState` field to store the game state:

```javascript
// Example Mongoose schema addition
const GameSchema = new mongoose.Schema({
  // Your existing fields...
  
  // Add this field to store the game state
  gameState: {
    type: mongoose.Schema.Types.Mixed,
    default: null
  }
});
```

## 4. API Endpoints to Implement

The game requires these API endpoints:

1. `GET /api/games/:id/state` - Get the current game state
2. `POST /api/games/:id/play` - Submit a move

Refer to `sleeping-queens-api.js` for the implementation details of these endpoints.

## 5. How It Works

1. The `game-loader.js` script automatically loads when a player is on the game-session page
2. When the game status changes to "in_progress", the game UI is initialized in the game-area div
3. The game communicates with your backend API to maintain game state between players
4. Real-time updates are handled through polling

## 6. Testing the Integration

1. Create a new game and invite players to join
2. Once enough players have joined, start the game (update game status to "in_progress")
3. The Sleeping Queens game interface should automatically load for all players

## Game Rules Summary

### Setup:
- All queens start face up in the middle (sleeping)
- Each player gets 5 cards

### Cards:
- **Kings**: Wake up (collect) a sleeping queen
- **Knights**: Steal an opponent's queen
- **Dragons**: Block knights
- **Potions**: Make an opponent put a queen back to sleep
- **Jesters**: Chance to wake up a random queen
- **Number Cards**: Can be discarded in combinations that add up to a value between 2-10 to draw new cards

### Win Conditions:
- First to collect 40 points worth of queens
- First to collect 5 queens (in a 2-3 player game) or 4 queens (in a 4-5 player game)
- If all queens are awake, the player with the most points wins

## Troubleshooting

- If the game doesn't load, check your browser console for errors
- Verify that all required files are in your public directory
- Ensure your backend API endpoints are correctly implemented
- Check that your Game model has been updated to store game state
